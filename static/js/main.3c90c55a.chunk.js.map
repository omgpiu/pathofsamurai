{"version":3,"sources":["HOC/WithAuthRedirect.tsx","SN-2-features/f1-login/l1-ui/Login.module.css","utils/validators/validators.ts","SN-2-features/f4-users/u1-ui/User/User.module.css","SN-2-features/f4-users/u1-ui/Users.module.css","SN-3-common/FormControls/FormControls.module.css","photo/samurai-robot-head-esport-mascot-logo_160921-34-removebg-preview.png","HOC/withSuspense.tsx","SN-1-main/m2-bll/app-selectors.ts","Types/api-types.ts","SN-1-main/m3-dal/instance-api.ts","SN-2-features/f1-login/l3-dal/auth-api.ts","SN-2-features/f1-login/l3-dal/security-api.ts","SN-2-features/f1-login/l2-bll/auth-reducer.tsx","SN-1-main/m2-bll/app-reducer.tsx","SN-3-common/preLoader/preLoader.tsx","SN-2-features/f8-settings/n1-ui/Settings.tsx","SN-2-features/f6-music/m1-ui/Music.tsx","SN-3-common/Page404/Page404.tsx","photo/commonAvatar.png","SN-2-features/f4-users/u1-ui/User/User.tsx","SN-2-features/f4-users/u2-bll/users-selectors.tsx","SN-2-features/f4-users/u1-ui/User/UserSearchForm.tsx","utils/object-helpers/object-helpers.tsx","SN-2-features/f4-users/u3-dal/users-api.ts","SN-2-features/f4-users/u2-bll/users-reducer.tsx","SN-3-common/Paginator/p1-ant/PaginatorAnt.tsx","SN-2-features/f4-users/u1-ui/Users.tsx","SN-2-features/f4-users/u1-ui/UsersPage.tsx","SN-2-features/f2-profile/p2-bll/profile-selectors.ts","SN-2-features/f2-profile/p3-dal/profile-api.ts","SN-2-features/f2-profile/p2-bll/profile-reducer.tsx","SN-2-features/f2-profile/ProfileInfo/ProfileStatus/ProfileStatus.tsx","SN-2-features/f2-profile/ProfileInfo/ProfileData/ProfileData.tsx","SN-2-features/f2-profile/ProfileInfo/ProfileDataForm/ProfileDataForm.tsx","SN-2-features/f2-profile/ProfileInfo/ProfileInfo.tsx","SN-2-features/f2-profile/MyPosts/Post/Post.tsx","SN-2-features/f2-profile/MyPosts/MyPosts.tsx","SN-2-features/f2-profile/p1-ui/ProfileContent.tsx","SN-2-features/f2-profile/p1-ui/ProfileContentContainerAPI.tsx","SN-2-features/f1-login/l2-bll/auth-selectors.ts","SN-2-features/f1-login/l1-ui/l2-old-features/LoginLabel.tsx","SN-2-features/f1-login/l1-ui/Login.tsx","SN-3-common/routes/Routes.tsx","SN-3-common/Nav/Nav.tsx","SN-3-common/Header/Header.tsx","SN-1-main/m2-bll/redux-store.tsx","SN-1-main/m1-ui/App.tsx","index.tsx","SN-2-features/f3-dialogs/d2-bll/dialogs-reducer.tsx","SN-2-features/f5-chat/c3-dal/chat-api.ts","SN-2-features/f5-chat/c2-bll/chat-reducer.ts","SN-3-common/Page404/Page404.module.css","SN-2-features/f4-users/u1-ui/User/UserSearchForm.module.css","SN-3-common/Header/Header.module.css","SN-2-features/f2-profile/MyPosts/Post/Post.module.css","SN-3-common/FormControls/FormControls.tsx","SN-2-features/f2-profile/MyPosts/MyPosts.module.css","SN-3-common/preLoader/preLoader.module.css","SN-2-features/f2-profile/ProfileInfo/ProfileData/ProfileData.module.css"],"names":["mapStateToPropsForRedirect","state","isAuth","auth","withAuthRedirect","WrappedComponent","connect","restProps","to","module","exports","required","value","undefined","maxLengthCreator","maxLength","length","withSuspense","props","Suspense","fallback","ResultCodesEnum","ResultCodeForCaptcha","getIsInitialized","app","isInitialized","instance","axios","create","baseURL","withCredentials","headers","AuthAPI","get","then","res","data","post","delete","securityAPI","initialState","userId","email","login","captchaUrl","error","authActions","type","payload","getAuthUserDataTC","dispatch","a","meData","resultCode","Success","id","console","log","loginTC","loginData","CaptchaRequired","Error","getCaptchaUrl","messages","message","captchaData","url","authReducer","action","appActions","appReducer","PreLoader","className","st","loader","l_main","l_square","Settings","Music","Page404","style","pnf","status","title","subTitle","extra","href","PROFILE_PATH","User","React","memo","user","followingInProgress","followTC","unfollowTC","disable","some","wrapper","src","photos","small","commonAvatar","userAvatar","alt","name","followed","onClick","disabled","icon","MinusCircleOutlined","PlusCircleOutlined","getUsers","createSelector","usersPage","users","filter","u","getPageSize","pageSize","getTotalUsers","totalUsersCount","getCurrentPage","currentPage","getIsFetching","isFetching","getFollowingInProgress","getUsersFilter","usersSearchFormValidate","values","UserSearchForm","onFilterChanged","useSelector","initialValues","term","friend","String","validate","onSubmit","setSubmitting","isSubmitting","forms_wrapper","component","htmlType","SearchOutlined","updateObjectInArray","items","itemId","objPropName","newObjProps","map","usersAPI","startFollowUsers","startUnfollowUsers","usersAction","count","getUsersTC","totalCount","_followUnfollowFlow","apiMethod","actionCreator","usersReducer","PaginatorAnt","onPageChanged","showQuickJumper","defaultCurrent","total","onChange","current","showTotal","range","pageSizeOptions","Users","useDispatch","history","useHistory","useEffect","parsed","queryString","location","search","substr","actualPage","actualFilter","page","Number","query","push","pathname","useCallback","pageNumber","follow","bind","unfollow","main_wrapper","marginBottom","users_wrapper","getPostData","profilePage","postData","getStatus","getIsAuth","profileAPI","put","photoFile","formData","FormData","append","v1","likesCount","profile","getUserProfile","profileData","profileActions","setUserProfile","updateUserStatus","setUserStatus","deletePostAC","postId","savePhotoSucces","addPostAC","profileReducer","newPost","p","ProfileStatus","isOwner","useState","editMode","setEditMode","localStatus","setStatus","onDoubleClick","autoFocus","e","currentTarget","onBlur","Contact","contactTitle","contactValue","ProfileData","description","lookingForAJob","lookingForAJobDescription","fullName","aboutMe","Object","keys","contacts","key","ProfileDataFormRedux","reduxForm","form","handleSubmit","createField","MyInput","Textarea","ProfileInfo","savePhoto","saveProfile","updateStatus","target","files","large","commonLogo","thisAva","Post","wrapper_i","item","img","messageBox","buttonsBlock","body","button","button_line","button_line_top","button_line_right","button_line_bottom","button_line_left","likes","MyPosts","postsData","reverse","onAddPost","newPostText","AddNewPostFormRedux","Profile","ProfileContentContainerAPI","this","match","params","authorizedUserId","getUserStatus","refreshProfile","prevProps","prevState","Component","compose","statusData","file","photoData","getState","stopSubmit","_error","Promise","reject","withRouter","getLogin","getError","LoginLabel","Login","resetError","onFinish","loginForm","Item","help","validateStatus","rules","prefix","placeholder","Password","iconRender","visible","valuePropName","noStyle","loginFormForgot","loginFormButton","SIGN_IN_PATH","DIALOGS_PATH","USERS_PATH","CHAT_PATH","NEWS_PATH","PAGE_NOT_FOUND_PATH","Routes","path","render","exact","SuspendedDialogs","SuspendedChat","from","SubMenu","Menu","Nav","theme","mode","UserOutlined","CommentOutlined","UserAddOutlined","CustomerServiceOutlined","SoundOutlined","SettingOutlined","FileOutlined","HeaderM","loginBlock","reducers","combineReducers","dialogsPage","dialogsReducer","formReducer","chat","chatReducer","store","createStore","composeWithDevTools","applyMiddleware","thunkMiddleware","window","Header","Layout","Content","Footer","Sider","DialogContainer","lazy","ChatContainer","AppHooks","collapsed","setCollapsed","minHeight","collapsible","onCollapse","logoNew","margin","textAlign","SamuraiJSApp","basename","process","ReactDOM","document","getElementById","messageData","dialogsData","dialogsActions","sendMessage","newMessageBody","subscribers","ws","closeHandler","notifySubscribersAboutStatus","setTimeout","createChannel","messageHandler","newMessages","JSON","parse","forEach","s","openHandler","errorHandler","cleanUp","removeEventListener","close","WebSocket","addEventListener","chatAPI","eventName","callback","send","actions","_newMessageHandler","newMessageHandlerCreator","_statusChangedHandler","statusChangedHandlerCreator","startMessagesListening","stopMessagesListening","m","index","array","FormControl","meta","touched","children","hasError","formControl","input","validators","text"],"mappings":"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","file":"static/js/main.3c90c55a.chunk.js","sourcesContent":["import React from 'react';\r\nimport {Redirect} from 'react-router-dom';\r\nimport {connect} from 'react-redux';\r\nimport {AppRootStateType} from '../SN-1-main/m2-bll/redux-store';\r\n\r\n\r\nlet mapStateToPropsForRedirect = (state: AppRootStateType) => ({\r\n    isAuth: state.auth.isAuth\r\n\r\n} as withAuthRedirectPropsType);\r\n\r\ntype DispatchPropsType = {}\r\n\r\nexport function withAuthRedirect<WCP>(WrappedComponent: React.ComponentType<WCP>) {\r\n\r\n\r\n    const RedirectComponent: React.FC<withAuthRedirectPropsType & DispatchPropsType> = ({isAuth, ...restProps}) => {\r\n        if (!isAuth) return <Redirect to={'/login'}/>;\r\n        return <WrappedComponent {...restProps as WCP}/>;\r\n    };\r\n\r\n    return connect<withAuthRedirectPropsType, DispatchPropsType, WCP, AppRootStateType>(mapStateToPropsForRedirect, {})(RedirectComponent);\r\n}\r\n\r\ntype withAuthRedirectPropsType = {\r\n    isAuth: boolean\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loginForm\":\"Login_loginForm__2YLqY\",\"loginFormForgot\":\"Login_loginFormForgot__YIznX\",\"antColRtl\":\"Login_antColRtl__2lgRv\",\"loginFormButton\":\"Login_loginFormButton__3hVNo\"};","export const required: FieldValidatorType = (value) => {\r\n    return value ? undefined : 'Field is required';\r\n};\r\n\r\n\r\nexport const maxLengthCreator = (maxLength: number):FieldValidatorType => (value) => {\r\n    return value && value.length > maxLength ? `Must be less ${maxLength} symbols` : undefined;\r\n};\r\n\r\nexport type FieldValidatorType = (value: string) => string | undefined\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"User_wrapper__I2BSD\",\"userAvatar\":\"User_userAvatar__1d9Rv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"selected\":\"Users_selected__1Mlex\",\"main_wrapper\":\"Users_main_wrapper__y7abh\",\"users_wrapper\":\"Users_users_wrapper__37hbw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"formControl\":\"FormControls_formControl__xtC2A\",\"error\":\"FormControls_error__1pt0w\"};","export default __webpack_public_path__ + \"static/media/samurai-robot-head-esport-mascot-logo_160921-34-removebg-preview.e6f9cbfd.png\";","import React from 'react';\r\n\r\n\r\nexport function withSuspense  <WCP>(WrappedComponent: React.ComponentType<WCP>)  {\r\n    return (props: WCP) => {\r\n        return <React.Suspense fallback={<div>Loading</div>}><WrappedComponent {...props}/></React.Suspense>\r\n\r\n    };\r\n\r\n};\r\n\r\n","import {AppRootStateType} from './redux-store';\r\n\r\nexport const getIsInitialized = (state: AppRootStateType): boolean => {\r\n    return state.app.isInitialized\r\n};\r\n","export type MeResponseDataType = {\r\n    id: number\r\n    email: string\r\n    login: string\r\n}\r\nexport type LoginResponseDataType = {\r\n    userId: number\r\n}\r\nexport type LoginParamsType = {\r\n    email?: string | undefined\r\n    password?: string | undefined\r\n    rememberMe?: boolean | undefined\r\n    captcha?: null | string\r\n}\r\nexport type APIResponseType<D = {}, RC = ResultCodesEnum> = {\r\n    data: D\r\n    messages: Array<string>\r\n    resultCode: RC\r\n}\r\n\r\nexport enum ResultCodesEnum {\r\n    Success = 0,\r\n    Error = 1,\r\n}\r\n\r\nexport enum ResultCodeForCaptcha {\r\n    CaptchaRequired = 10\r\n}\r\n","import axios from 'axios';\r\n\r\nexport const instance = axios.create({\r\n    baseURL: `https://social-network.samuraijs.com/api/1.0/`,\r\n    withCredentials: true,\r\n    headers: {\r\n        'API-KEY': '78abceff-cb7c-4815-8b56-016c67d0625d'\r\n    }\r\n});\r\n","import {\r\n    APIResponseType,\r\n    LoginParamsType,\r\n    LoginResponseDataType,\r\n    MeResponseDataType,\r\n    ResultCodeForCaptcha,\r\n    ResultCodesEnum\r\n} from '../../../Types/api-types';\r\nimport {instance} from '../../../SN-1-main/m3-dal/instance-api';\r\n\r\n\r\nexport const AuthAPI = {\r\n    me() {\r\n        return instance.get<APIResponseType<MeResponseDataType>>(`auth/me`).then(res => res.data);\r\n    },\r\n    login(data: LoginParamsType) {\r\n        return instance.post<APIResponseType<LoginResponseDataType, ResultCodesEnum | ResultCodeForCaptcha>>('auth/login', data).then(res => res.data);\r\n        // return instance.post<any>('auth/login', data)\r\n    },\r\n    logout() {\r\n        return instance.delete<APIResponseType<LoginResponseDataType>>('auth/login').then(res => res.data);\r\n    }\r\n};\r\n\r\n\r\n","import {instance} from '../../../SN-1-main/m3-dal/instance-api';\r\n\r\nexport const securityAPI = {\r\n    getCaptchaUrl() {\r\n        return instance.get<{ url: string }>(`security/get-captcha-url`);\r\n    }\r\n};\r\n\r\n","import {AuthAPI} from '../l3-dal/auth-api';\r\nimport {LoginParamsType, ResultCodeForCaptcha, ResultCodesEnum} from '../../../Types/api-types';\r\nimport {securityAPI} from '../l3-dal/security-api';\r\nimport {BaseThunkType, InferActionsTypes} from '../../../Types/Types';\r\n\r\n\r\nconst initialState = {\r\n    userId: null as (number | null),\r\n    email: null as string | null,\r\n    login: null as string | null,\r\n    isAuth: false,\r\n    captchaUrl: null as string | null,\r\n    error: ''\r\n\r\n};\r\n\r\nconst authReducer = (state: InitialStateType = initialState, action: ActionsType): InitialStateType => {\r\n    switch (action.type) {\r\n        case 'AUTH/SET_USER_DATA':\r\n            return {\r\n                ...state, ...action.payload\r\n            };\r\n        case  'AUTH/SET_ERROR' :\r\n            return {\r\n                ...state,\r\n                ...action.payload\r\n\r\n            };\r\n        case 'AUTH/GET_CAPTCHA_URL_SUCCESS':\r\n            return {\r\n                ...state,\r\n                ...action.payload\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\nexport const authActions = {\r\n    setAuthUserData: (userId: number | null, email: string | null, login: string | null, isAuth: boolean) => ({\r\n        type: 'AUTH/SET_USER_DATA', payload: {\r\n            userId, email, login, isAuth\r\n        }\r\n    } as const),\r\n    setError: (error: string) => (\r\n        {type: 'AUTH/SET_ERROR', payload: {error}} as const),\r\n    getCaptchaUrlSuccess: (captchaUrl: string) => (\r\n        {type: 'AUTH/GET_CAPTCHA_URL_SUCCESS', payload: {captchaUrl}} as const),\r\n\r\n};\r\nexport const getAuthUserDataTC = (): ThunkType => async (dispatch) => {\r\n    try {\r\n        const meData = await AuthAPI.me();\r\n        if (meData.resultCode === ResultCodesEnum.Success) {\r\n            let {id, email, login} = meData.data;\r\n            dispatch(authActions.setAuthUserData(id, email, login, true));\r\n        }\r\n    } catch (e) {\r\n        console.log('Some error with getAuthUserDataTC');\r\n    }\r\n\r\n};\r\nexport const loginTC = (data: LoginParamsType): ThunkType => async (dispatch) => {\r\n    try {\r\n        const loginData = await AuthAPI.login(data);\r\n        switch (loginData.resultCode) {\r\n            case  ResultCodesEnum.Success:\r\n                await dispatch(getAuthUserDataTC());\r\n                break;\r\n            case ResultCodeForCaptcha.CaptchaRequired:\r\n                await dispatch(getCaptchaUrl());\r\n                dispatch(authActions.setError(loginData.messages[0]));\r\n                break;\r\n            case  ResultCodesEnum.Error:\r\n                console.log('error');\r\n                dispatch(authActions.setError(loginData.messages[0]));\r\n\r\n\r\n        }\r\n    } catch (error) {\r\n\r\n        dispatch(authActions.setError(error.message));\r\n    }\r\n\r\n};\r\n\r\nexport const getCaptchaUrl = (): ThunkType => async (dispatch) => {\r\n    try {\r\n        const captchaData = await securityAPI.getCaptchaUrl();\r\n        const captchaUrl = captchaData.data.url;\r\n        dispatch(authActions.getCaptchaUrlSuccess(captchaUrl));\r\n    } catch (error) {\r\n        dispatch(authActions.setError(error.message));\r\n    }\r\n\r\n\r\n};\r\nexport const logoutTC = (): ThunkType => async (dispatch) => {\r\n    try {\r\n        const logoutData = await AuthAPI.logout();\r\n        if (logoutData.resultCode === ResultCodesEnum.Success) {\r\n            dispatch(authActions.setAuthUserData(null, null, null, false));\r\n        }\r\n    } catch (error) {\r\n        dispatch(authActions.setError(error.message));\r\n    }\r\n\r\n};\r\n\r\ntype  InitialStateType = typeof initialState\r\ntype ActionsType = InferActionsTypes<typeof authActions>\r\ntype ThunkType = BaseThunkType<ActionsType>\r\n\r\n\r\nexport default authReducer;\r\n","import {getAuthUserDataTC} from '../../SN-2-features/f1-login/l2-bll/auth-reducer';\r\nimport {BaseThunkType, InferActionsTypes} from '../../Types/Types';\r\n\r\n\r\nconst initialState = {\r\n    isInitialized: false\r\n};\r\n\r\nconst appReducer = (state: InitialStateType = initialState, action: ActionsType): InitialStateType => {\r\n    switch (action.type) {\r\n        case 'APP/SET_IS_INITIALIZED':\r\n            return {\r\n                ...state,\r\n                isInitialized: true,\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport const appActions = {\r\n    setInitialized: () => ({type: 'APP/SET_IS_INITIALIZED'} as const)\r\n};\r\n\r\nexport const setInitializedTC = (): ThunkType => async (dispatch) => {\r\n    try {\r\n        await dispatch(getAuthUserDataTC());\r\n        dispatch(appActions.setInitialized());\r\n    } catch (e) {\r\n        console.log(e);\r\n        console.log('Some error with setInitializedTC');\r\n    }\r\n\r\n};\r\ntype ActionsType = InferActionsTypes<typeof appActions>\r\ntype  InitialStateType = typeof initialState\r\ntype ThunkType = BaseThunkType<ActionsType>\r\n\r\nexport default appReducer;\r\n","import React from 'react';\r\nimport st from './preLoader.module.css';\r\n\r\n\r\nconst PreLoader: React.FC = () => {\r\n    return <div className={st.loader}>\r\n        <div className={st.l_main}>\r\n            <div className={st.l_square}><span></span><span></span><span></span></div>\r\n            <div className={st.l_square}><span></span><span></span><span></span></div>\r\n            <div className={st.l_square}><span></span><span></span><span></span></div>\r\n            <div className={st.l_square}><span></span><span></span><span></span></div>\r\n\r\n        </div>\r\n    </div>;\r\n\r\n};\r\n\r\n\r\nexport default PreLoader;\r\n","import React from 'react';\r\n\r\n\r\nfunction Settings() {\r\n    return (\r\n        <div><div>Settings</div></div>\r\n    )\r\n\r\n}\r\n\r\nexport default Settings;","import React from 'react';\r\n\r\n\r\n function Music() {\r\n    return (\r\n        <div><div>Music</div></div>\r\n    )\r\n\r\n}\r\n\r\nexport default Music;\r\n\r\n","import {Button, Result} from 'antd';\r\nimport React from 'react';\r\nimport style from './Page404.module.css'\r\nimport {PROFILE_PATH} from '../routes/Routes';\r\n\r\n\r\nexport const Page404: React.FC = () => {\r\n\r\n    return <section className={style.pnf}>\r\n        {/*<div className={style.pnf_error}> 404</div>*/}\r\n        {/*<p className={style.pnf_descr}>Sorry, Page not Found...</p>*/}\r\n        <Result\r\n            status=\"404\"\r\n            title=\"404\"\r\n            subTitle=\"Sorry, the page you visited does not exist.\"\r\n            extra={<Button type=\"primary\" href={PROFILE_PATH}>Back to Profile</Button>}\r\n        />\r\n    </section>\r\n}","export default __webpack_public_path__ + \"static/media/commonAvatar.da05b2b0.png\";","import React from 'react';\r\n\r\nimport st from './User.module.css';\r\nimport commonAvatar from '../../../../photo/commonAvatar.png';\r\nimport {Link} from 'react-router-dom';\r\nimport {userType} from '../../../../Types/Types';\r\nimport {PROFILE_PATH} from '../../../../SN-3-common/routes/Routes';\r\nimport {Button} from 'antd';\r\nimport {MinusCircleOutlined, PlusCircleOutlined} from '@ant-design/icons';\r\n\r\n\r\ntype UserType = {\r\n    user: userType\r\n    followingInProgress: Array<number>\r\n    followTC: (userId: number) => void\r\n    unfollowTC: (userId: number) => void\r\n\r\n}\r\n\r\nconst User: React.FC<UserType> = React.memo(({user, followingInProgress, followTC, unfollowTC}) => {\r\n\r\n\r\n    const unfollow = () => {\r\n        unfollowTC(user.id);\r\n    }\r\n    const follow = () => {\r\n        followTC(user.id);\r\n    }\r\n    const disable = followingInProgress.some(id => id === user.id)\r\n    return (\r\n        <div key={user.id} className={st.wrapper}>\r\n\r\n\r\n            <div>\r\n                <Link to={PROFILE_PATH + '/' + user.id}>\r\n                    <img src={user.photos.small != null\r\n                        ? user.photos.small\r\n                        : commonAvatar} className={st.userAvatar} alt=\"avatar\"/>\r\n                </Link>\r\n            </div>\r\n\r\n            <span> <b>Name:</b> {user.name}</span>\r\n            <div>\r\n                <b>Status :</b> <span>{user.status || 'What are you doing?'}</span>\r\n            </div>\r\n\r\n            <div>\r\n                {user.followed ?\r\n                    <Button type=\"primary\" onClick={unfollow} disabled={disable}\r\n                            icon={<MinusCircleOutlined/>}>\r\n                        Unfollow\r\n                    </Button>\r\n                    :\r\n                    <Button type=\"primary\" onClick={follow} disabled={disable}\r\n                            icon={<PlusCircleOutlined/>}\r\n                    >\r\n                        Follow\r\n                    </Button>\r\n                }\r\n            </div>\r\n\r\n        </div>\r\n    );\r\n})\r\n\r\n\r\nexport default User;\r\n","import {createSelector} from 'reselect';\r\nimport {FilterType} from './users-reducer';\r\nimport {AppRootStateType} from '../../../SN-1-main/m2-bll/redux-store';\r\nimport {userType} from '../../../Types/Types';\r\n\r\n\r\nconst getUsersSelector = (state: AppRootStateType) => {\r\n    return state.usersPage.users;\r\n};\r\n\r\nexport const getUsers = createSelector(getUsersSelector, (users): Array<userType> => {\r\n    return users.filter(u => true);\r\n}); // пример\r\n\r\nexport const getPageSize = (state: AppRootStateType): number | undefined => {\r\n    return state.usersPage.pageSize;\r\n};\r\n\r\nexport const getTotalUsers = (state: AppRootStateType): number => {\r\n    return state.usersPage.totalUsersCount;\r\n};\r\nexport const getCurrentPage = (state: AppRootStateType): number => {\r\n    return state.usersPage.currentPage;\r\n};\r\n\r\nexport const getIsFetching = (state: AppRootStateType): boolean => {\r\n    return state.usersPage.isFetching;\r\n};\r\nexport const getFollowingInProgress = (state: AppRootStateType): Array<number> => {\r\n    return state.usersPage.followingInProgress;\r\n};\r\nexport const getUsersFilter = (state: AppRootStateType): FilterType => {\r\n    return state.usersPage.filter;\r\n};\r\n\r\n","import {SearchOutlined} from '@ant-design/icons';\r\nimport {Button} from 'antd';\r\nimport {Field, Form, Formik} from 'formik';\r\nimport React from 'react';\r\nimport {useSelector} from 'react-redux';\r\nimport {FilterType} from '../../u2-bll/users-reducer';\r\nimport {getUsersFilter} from '../../u2-bll/users-selectors';\r\nimport st from './UserSearchForm.module.css';\r\n\r\ntype FriendFormType = 'true' | 'false' | 'null'\r\n\r\ntype FormType = {\r\n    term: string\r\n    friend: 'true' | 'false' | 'null'\r\n}\r\ntype PropsType = {\r\n    onFilterChanged: (filter: FilterType) => void\r\n}\r\n\r\nconst usersSearchFormValidate = (values: any) => {\r\n    const errors = {};\r\n    return errors;\r\n};\r\n\r\n\r\nexport const UserSearchForm: React.FC<PropsType> = React.memo(({onFilterChanged, ...rest}) => {\r\n    console.log('searh form');\r\n    const filter = useSelector(getUsersFilter);\r\n    const submit = (values: FormType, {setSubmitting}: { setSubmitting: (isSubmitting: boolean) => void }) => {\r\n        const filter: FilterType = {\r\n            term: values.term,\r\n            friend: values.friend === 'null' ? null : values.friend === 'true' ? true : false\r\n        };\r\n        onFilterChanged(filter);\r\n        setSubmitting(false);\r\n    };\r\n    return <>\r\n        <Formik\r\n            initialValues={{term: filter.term, friend: String(filter.friend) as FriendFormType}}\r\n            validate={usersSearchFormValidate}\r\n            onSubmit={submit}\r\n        >\r\n            {({isSubmitting}) => (\r\n                <Form className={st.forms_wrapper}>\r\n                    <>\r\n                        <Field\r\n                            id=\"term\"\r\n                            name=\"term\"\r\n                            type=\"text\"\r\n\r\n                        />\r\n                    </>\r\n                    <>\r\n                        <Field\r\n                            component=\"select\"\r\n                            id=\"location\"\r\n                            name=\"friend\"\r\n                         >\r\n                            <option value=\"null\">All people</option>\r\n                            <option value=\"true\">Friends</option>\r\n                            <option value=\"false\">You may know</option>\r\n                        </Field>\r\n\r\n                    </>\r\n                    <Button type=\"primary\" htmlType={'submit'} disabled={isSubmitting} icon={<SearchOutlined/>}>\r\n                        Search\r\n                    </Button>\r\n                </Form>)}\r\n        </Formik>\r\n    </>;\r\n});\r\n\r\n","export const updateObjectInArray = (items:Array<any>,itemId:any,objPropName:any,newObjProps:any)=>{\r\n  return  items.map(u => {\r\n        if (u[objPropName] === itemId) {\r\n            return {...u, ...newObjProps};\r\n        }\r\n        return u;\r\n    })\r\n\r\n\r\n}\r\n\r\n","import {instance} from '../../../SN-1-main/m3-dal/instance-api';\r\nimport {APIResponseType} from '../../../Types/api-types';\r\nimport {userType} from '../../../Types/Types';\r\n\r\nexport const usersAPI = {\r\n    getUsers(currentPage: number = 1, pageSize: number = 10, term: string = '', friend: null | boolean = null) {\r\n        return instance.get<ResponseItemsType>(`users?page=${currentPage}&count=${pageSize}&term=${term}` +\r\n            (friend === null ? '' : `&friend=${friend}`));\r\n    },\r\n    startFollowUsers(userId: number) {\r\n        return instance.post<APIResponseType>(`follow/${userId}`).then(res => res.data);\r\n    },\r\n    startUnfollowUsers(userId: number) {\r\n        return instance.delete(`follow/${userId}`).then(res => res.data) as Promise<APIResponseType>;\r\n    },\r\n\r\n\r\n};\r\n\r\n\r\ntype ResponseItemsType = {\r\n    items: Array<userType>\r\n    totalCount: number\r\n    error: string | null\r\n}\r\n","import {Dispatch} from 'redux';\r\nimport {BaseThunkType, InferActionsTypes, userType} from '../../../Types/Types';\r\nimport {updateObjectInArray} from '../../../utils/object-helpers/object-helpers';\r\nimport {usersAPI} from '../u3-dal/users-api';\r\nimport {APIResponseType, ResultCodesEnum} from '../../../Types/api-types';\r\n\r\n\r\nconst initialState = {\r\n    users: [] as Array<userType>,\r\n    pageSize: 10 as undefined | number,\r\n    totalUsersCount: 1,\r\n    currentPage: 1,\r\n    isFetching: false,\r\n    followingInProgress: [] as Array<number>,\r\n    filter: {\r\n        term: '',\r\n        friend: null as null | boolean\r\n    }\r\n};\r\n\r\n\r\nconst usersReducer = (state: StateProfile = initialState, action: ActionType): StateProfile => {\r\n\r\n    switch (action.type) {\r\n        case 'USERS/SET_PAGE_SIZE':\r\n            return {\r\n                ...state,\r\n                pageSize: action.pageSize\r\n            };\r\n        case 'USERS/FOLLOW':\r\n            return {\r\n                ...state,\r\n                users: updateObjectInArray(state.users, action.userId, 'id', {followed: true})\r\n            };\r\n        case 'USERS/UNFOLLOW':\r\n            return {\r\n                ...state, users: updateObjectInArray(state.users, action.userId, 'id', {followed: false})\r\n            };\r\n        case 'USERS/SET_USERS':\r\n            return {...state, users: action.users};\r\n        case 'USERS/SET_PAGE':\r\n            return {...state, currentPage: action.currentPage};\r\n        case  'USERS/SET_TOTAL_USER_COUNT':\r\n            return {...state, totalUsersCount: action.count};\r\n        case 'USERS/TOGGLE_IS_FETCHING':\r\n            return {...state, isFetching: action.isFetching};\r\n        case 'USERS/TOGGLE_IS_FOLLOWING_PROGRESS':\r\n            return {\r\n                ...state,\r\n                followingInProgress: action.isFetching\r\n                    ? [...state.followingInProgress, action.userId]\r\n                    : state.followingInProgress.filter(id => id !== action.userId)\r\n            };\r\n        case 'USERS/SET_FILTER': {\r\n            return {\r\n                ...state,\r\n                filter: action.payload\r\n            };\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n};\r\nexport const usersAction = {\r\n    followUser: (userId: number) => ({type: 'USERS/FOLLOW', userId} as const),\r\n    setPageSize: (pageSize?: number) => ({type: 'USERS/SET_PAGE_SIZE', pageSize} as const),\r\n    unfollowUser: (userId: number) => ({type: 'USERS/UNFOLLOW', userId} as const),\r\n    setUsers: (users: Array<userType>) => ({type: 'USERS/SET_USERS', users} as const),\r\n    setPage: (currentPage: number) => ({type: 'USERS/SET_PAGE', currentPage} as const),\r\n    setFilter: (filter: FilterType) => ({type: 'USERS/SET_FILTER', payload: filter} as const),\r\n    setTotalUsersCount: (totalUsersCount: number) => ({\r\n        type: 'USERS/SET_TOTAL_USER_COUNT',\r\n        count: totalUsersCount\r\n    } as const),\r\n    toggleIsFetching: (isFetching: boolean) => ({type: 'USERS/TOGGLE_IS_FETCHING', isFetching} as const),\r\n    toggleFollowingProgress: (isFetching: boolean, userId: number) => ({\r\n        type: 'USERS/TOGGLE_IS_FOLLOWING_PROGRESS',\r\n        isFetching,\r\n        userId\r\n    } as const)\r\n};\r\nexport const getUsersTC = (currentPage: number, filter: FilterType, pageSize?: number): ThunkType => async (dispatch) => {\r\n    try {\r\n        dispatch(usersAction.toggleIsFetching(true));\r\n        dispatch(usersAction.setPage(currentPage));\r\n        dispatch(usersAction.setFilter(filter));\r\n\r\n        const data = await usersAPI.getUsers(currentPage, pageSize, filter.term, filter.friend);\r\n        dispatch(usersAction.toggleIsFetching(false));\r\n        dispatch(usersAction.setUsers(data.data.items));\r\n        dispatch(usersAction.setTotalUsersCount(data.data.totalCount));\r\n    } catch (e) {\r\n        console.log('Error with getUsersTC');\r\n    }\r\n};\r\n\r\nconst _followUnfollowFlow = async (dispatch: Dispatch<ActionType>,\r\n                                   userId: number,\r\n                                   apiMethod: (userId: number) => Promise<APIResponseType>,\r\n                                   actionCreator: (userId: number) => ActionType) => {\r\n    try {\r\n        dispatch(usersAction.toggleFollowingProgress(true, userId));\r\n        // dispatch(actionCreator(userId))\r\n        const data = await apiMethod(userId);\r\n\r\n\r\n        if (data.resultCode === ResultCodesEnum.Success) {\r\n            dispatch(actionCreator(userId));\r\n        }\r\n        dispatch(usersAction.toggleFollowingProgress(false, userId));\r\n    } catch (e) {\r\n        console.log('Error with _followUnfollowFlow ');\r\n    }\r\n};\r\nexport const followTC = (userId: number): ThunkType => async (dispatch) => {\r\n    try {\r\n        let apiMethod = usersAPI.startFollowUsers.bind(usersAPI);\r\n        await _followUnfollowFlow(dispatch, userId, apiMethod, usersAction.followUser);\r\n    } catch (e) {\r\n        console.log('Error with followTC');\r\n    }\r\n};\r\nexport const unfollowTC = (userId: number): ThunkType => async (dispatch) => {\r\n    try {\r\n        let apiMethod = usersAPI.startUnfollowUsers.bind(usersAPI);\r\n        await _followUnfollowFlow(dispatch, userId, apiMethod, usersAction.unfollowUser);\r\n    } catch (e) {\r\n        console.log('Error with unfollowTC');\r\n    }\r\n};\r\n\r\nexport type StateProfile = typeof initialState\r\ntype ActionType = InferActionsTypes<typeof usersAction>\r\ntype ThunkType = BaseThunkType<ActionType>\r\nexport type FilterType = typeof initialState.filter\r\n\r\nexport default usersReducer;\r\n","import {Pagination} from 'antd';\r\nimport React, {CSSProperties} from 'react';\r\n\r\n\r\ntype PropsType = {\r\n    totalUsersCount?: number\r\n    currentPage?: number\r\n    onPageChanged: (page: number, pageSize?: number) => void\r\n    pageSize: number | undefined\r\n    portionSize?: number\r\n    style: CSSProperties\r\n\r\n}\r\n\r\n\r\nconst PaginatorAnt: React.FC<PropsType> = React.memo(({\r\n                                                          totalUsersCount,\r\n                                                          onPageChanged,\r\n                                                          currentPage,\r\n                                                          pageSize,\r\n                                                          style\r\n                                                      }) => {\r\n    return (\r\n        <div style={style}>\r\n            <Pagination showQuickJumper defaultCurrent={1} total={totalUsersCount}\r\n                        onChange={onPageChanged}\r\n                        current={currentPage}\r\n                        pageSize={pageSize}\r\n                        showTotal={(total, range) => `${range[0]}-${range[1]} of ${total} items`}\r\n                        pageSizeOptions={['5', '10', '20', '50', '100']}\r\n            />\r\n        </div>\r\n\r\n\r\n    );\r\n\r\n});\r\n\r\nexport default PaginatorAnt;\r\n\r\n\r\n","import React, {useCallback, useEffect} from 'react';\r\nimport User from './User/User';\r\nimport {UserSearchForm} from './User/UserSearchForm';\r\nimport {useDispatch, useSelector} from 'react-redux';\r\nimport {useHistory} from 'react-router-dom';\r\nimport * as queryString from 'querystring';\r\nimport {\r\n    getCurrentPage,\r\n    getFollowingInProgress,\r\n    getPageSize,\r\n    getTotalUsers,\r\n    getUsers,\r\n    getUsersFilter\r\n} from '../u2-bll/users-selectors';\r\nimport {FilterType, followTC, getUsersTC, unfollowTC, usersAction} from '../u2-bll/users-reducer';\r\nimport {userType} from '../../../Types/Types';\r\nimport st from './Users.module.css';\r\nimport PaginatorAnt from '../../../SN-3-common/Paginator/p1-ant/PaginatorAnt';\r\n\r\n\r\ntype PropsType = {}\r\ntype QueryParamsType = { term?: string; page?: string; friend?: string }\r\nexport const Users: React.FC<PropsType> = () => {\r\n    const dispatch = useDispatch();\r\n    const totalUsersCount = useSelector(getTotalUsers);\r\n    const currentPage = useSelector(getCurrentPage);\r\n    const pageSize = useSelector(getPageSize);\r\n    const followingInProgress = useSelector(getFollowingInProgress);\r\n    const users = useSelector(getUsers);\r\n    const filter = useSelector(getUsersFilter);\r\n\r\n    const history = useHistory();\r\n    useEffect(() => {\r\n        const parsed = queryString.parse(history.location.search.substr(1)) as QueryParamsType;\r\n        let actualPage = currentPage;\r\n        let actualFilter = filter;\r\n        if (!!parsed.page) actualPage = Number(parsed.page);\r\n        if (!!parsed.term) actualFilter = {...actualFilter, term: parsed.term as string};\r\n        switch (parsed.friend) {\r\n            case 'null':\r\n                actualFilter = {...actualFilter, friend: null};\r\n                break;\r\n            case 'true':\r\n                actualFilter = {...actualFilter, friend: true};\r\n                break;\r\n            case 'false':\r\n                actualFilter = {...actualFilter, friend: false};\r\n                break;\r\n        }\r\n\r\n        dispatch(getUsersTC(actualPage, actualFilter, pageSize));\r\n    }, []);\r\n    useEffect(() => {\r\n        const query: QueryParamsType = {};\r\n        if (!!filter.term) query.term = filter.term;\r\n        if (filter.friend !== null) query.friend = String(filter.friend);\r\n        if (currentPage !== 1) query.page = String(currentPage);\r\n        history.push({\r\n            pathname: '/users',\r\n            search: queryString.stringify(query)\r\n        });\r\n    }, [filter, currentPage]);\r\n\r\n    const onPageChanged = useCallback((pageNumber = 1, pageSize?: number) => {\r\n        dispatch(usersAction.setPageSize(pageSize));\r\n        dispatch(getUsersTC(pageNumber, filter, pageSize));\r\n    }, [dispatch, filter, pageSize]);\r\n\r\n    const onFilterChanged = useCallback((filter: FilterType) => {\r\n\r\n        dispatch(getUsersTC(1, filter, pageSize));\r\n    }, [dispatch,filter]);\r\n\r\n    const follow = useCallback((userId: number) => {\r\n        dispatch(followTC(userId));\r\n    }, [dispatch]);\r\n\r\n    const unfollow = useCallback((userId: number) => {\r\n        dispatch(unfollowTC(userId));\r\n    }, [dispatch]);\r\n\r\n\r\n    return (\r\n        <div className={st.main_wrapper}>\r\n            <UserSearchForm onFilterChanged={onFilterChanged}/>\r\n            <PaginatorAnt totalUsersCount={totalUsersCount}\r\n                          onPageChanged={onPageChanged}\r\n                          currentPage={currentPage}\r\n                          pageSize={pageSize}\r\n                          style={{marginBottom: '10px'}}\r\n            />\r\n            <div className={st.users_wrapper}>\r\n                {users.map((user: userType) => <User\r\n                    unfollowTC={unfollow}\r\n                    followTC={follow}\r\n                    followingInProgress={followingInProgress}\r\n                    user={user}\r\n                    key={user.id}/>)}\r\n            </div>\r\n\r\n\r\n            {/*---old paginator---*/}\r\n            {/*<Paginator currentPage={currentPage} onPageChanged={onPageChanged} pageSize={pageSize}*/}\r\n            {/*           totalUsersCount={totalUsersCount}/>*/}\r\n\r\n        </div>);\r\n};\r\n\r\n\r\n","import React from 'react';\r\nimport {useSelector} from 'react-redux';\r\nimport {Users} from './Users';\r\nimport {getIsFetching} from '../u2-bll/users-selectors';\r\nimport PreLoader from '../../../SN-3-common/preLoader/preLoader';\r\nimport {withAuthRedirect} from '../../../HOC/WithAuthRedirect';\r\n\r\ntype UserPageType = {}\r\nconst UsersPage: React.FC<UserPageType> = () => {\r\n\r\n    const isFetching = useSelector(getIsFetching);\r\n    return <>\r\n        {isFetching ? <PreLoader/> : null}\r\n        <Users/>\r\n    </>\r\n};\r\nexport default withAuthRedirect(UsersPage)\r\n","import {AppRootStateType} from '../../../SN-1-main/m2-bll/redux-store';\r\nimport {NewProfileType, PostType} from '../../../Types/Types';\r\n\r\n\r\nexport const getPostData = (state: AppRootStateType): PostType[] => {\r\n    return state.profilePage.postData;\r\n};\r\nexport const getProfile = (state: AppRootStateType): NewProfileType | null => {\r\n    return state.profilePage.profile\r\n}\r\nexport const getStatus = (state: AppRootStateType): string => {\r\n    return state.profilePage.status\r\n}\r\nexport const getIsAuth = (state: AppRootStateType): boolean => {\r\n    return state.auth.isAuth\r\n}\r\nexport const getUserId = (state: AppRootStateType): number | null => {\r\n    return state.auth.userId\r\n}\r\n","import {NewProfileType, PhotosType} from '../../../Types/Types';\r\nimport {instance} from '../../../SN-1-main/m3-dal/instance-api';\r\nimport {APIResponseType} from '../../../Types/api-types';\r\n\r\n\r\nexport const profileAPI = {\r\n    getProfile(userId: number | null) {\r\n        return instance.get<NewProfileType>(`profile/` + userId).then(res => res.data);\r\n    },\r\n    getStatus(userId: number | null) {\r\n        return instance.get<string>(`profile/status/` + userId).then(res => res.data);\r\n    },\r\n    updateStatus(status: string) {\r\n\r\n        return instance.put<APIResponseType>(`profile/status`, {status: status}).then(res => res.data);\r\n    },\r\n    savePhoto(photoFile: File) {\r\n        const formData = new FormData();\r\n        formData.append('image', photoFile);\r\n        return instance.put<APIResponseType<SavePhotosResponseType>>(`profile/photo`, formData, {\r\n            headers: {\r\n                'Content-Type': 'multipart/form-data'\r\n            }\r\n        }).then(res => res.data);\r\n    },\r\n    saveProfile(formData: NewProfileType) {\r\n        return instance.put<APIResponseType>(`profile`, formData).then(res => res.data);\r\n    }\r\n};\r\n\r\ntype SavePhotosResponseType = {\r\n    photos: PhotosType\r\n}\r\n\r\n\r\n\r\n","import {v1} from 'uuid';\r\n\r\n\r\nimport {FormAction, stopSubmit} from 'redux-form';\r\nimport {BaseThunkType, InferActionsTypes, NewProfileType, PhotosType, PostType} from '../../../Types/Types';\r\nimport {profileAPI} from '../p3-dal/profile-api';\r\nimport {ResultCodesEnum} from '../../../Types/api-types';\r\n\r\n\r\nlet initialState = {\r\n    postData: [\r\n        {\r\n            id: v1(),\r\n            message: 'Hello friendlo friendlo friendlo friendlo friendlo friendlo friendlo friendlo friendlo friendlo friendlo friendlo friend',\r\n            likesCount: 14\r\n        },\r\n        {id: v1(), message: 'Hello friend', likesCount: 14},\r\n        {id: v1(), message: 'Hello friend', likesCount: 14},\r\n        {id: v1(), message: 'Hello ', likesCount: 10},\r\n        {id: v1(), message: 'Hello ', likesCount: 10}],\r\n    profile: null as NewProfileType | null,\r\n    status: ''\r\n};\r\n\r\nconst profileReducer = (state: InitialStateType = initialState, action: ActionsType): InitialStateType => {\r\n    switch (action.type) {\r\n        case 'PROFILE/ADD_POST':\r\n            const newPost: PostType = {\r\n                id: v1(),\r\n                message: action.post,\r\n                likesCount: 0\r\n            };\r\n            return {\r\n                ...state,\r\n                postData: [...state.postData, newPost],\r\n            };\r\n        case  'PROFILE/SET_USER_PROFILE':\r\n            return {\r\n                ...state,\r\n                profile: action.profile\r\n            };\r\n        case 'PROFILE/SET_USER_STATUS':\r\n            return {\r\n                ...state,\r\n                status: action.status\r\n            };\r\n        case 'PROFILE/DELETE_POST':\r\n            return {\r\n                ...state,\r\n                postData: state.postData.filter(p => p.id !== action.postId)\r\n            };\r\n        case 'PROFILE/SAVE_PHOTO_SUCCESS':\r\n            return {\r\n                ...state, profile: {...state.profile, photos: action.photos} as NewProfileType\r\n            };\r\n        default :\r\n            return state;\r\n    }\r\n\r\n};\r\nexport const getUserProfile = (userId: number | null): ThunkType => async (dispatch) => {\r\n    try {\r\n        const profileData = await profileAPI.getProfile(userId);\r\n        dispatch(profileActions.setUserProfile(profileData));\r\n    } catch (e) {\r\n        console.log('Some error with getUserProfileTC');\r\n    }\r\n\r\n\r\n};\r\nexport const getUserStatus = (userId: number | null): ThunkType => async (dispatch) => {\r\n    try {\r\n        const statusData = await profileAPI.getStatus(userId);\r\n        dispatch(profileActions.setUserStatus(statusData));\r\n    } catch (e) {\r\n        console.log('Some error with getUserStatusTC');\r\n    }\r\n\r\n};\r\nexport const updateUserStatus = (status: string): ThunkType => async (dispatch) => {\r\n    try {\r\n        const statusData = await profileAPI.updateStatus(status);\r\n        if (statusData.resultCode === ResultCodesEnum.Success) {\r\n            dispatch(profileActions.setUserStatus(status));\r\n        }\r\n    } catch (e) {\r\n        console.log('Some error with updateUserStatusTC');\r\n    }\r\n};\r\nexport const savePhoto = (file: File): ThunkType => async (dispatch) => {\r\n    try {\r\n        const photoData = await profileAPI.savePhoto(file);\r\n        if (photoData.resultCode === 0) {\r\n            dispatch(profileActions.savePhotoSucces(photoData.data.photos));\r\n        }\r\n    } catch (e) {\r\n        console.log('Some error with savePhoto');\r\n    }\r\n\r\n};\r\nexport const saveProfile = (formData: NewProfileType): ThunkType => async (dispatch, getState) => {\r\n    try {\r\n        const userId = getState().auth.userId;\r\n        const saveProfile = await profileAPI.saveProfile(formData);\r\n        if (saveProfile.resultCode === ResultCodesEnum.Success) {\r\n            await dispatch(getUserProfile(userId));\r\n        } else {\r\n            dispatch(stopSubmit('edit-profile', {_error: saveProfile.messages[0]}));\r\n            return Promise.reject(saveProfile.messages[0]);\r\n        }\r\n    } catch (e) {\r\n        console.log('Some error with saveProfile');\r\n    }\r\n\r\n};\r\nexport const profileActions = {\r\n    deletePostAC: (postId: string) => ({\r\n        type: 'PROFILE/DELETE_POST'\r\n        , postId\r\n    } as const),\r\n    savePhotoSucces: (photos: PhotosType) => ({\r\n        type: 'PROFILE/SAVE_PHOTO_SUCCESS'\r\n        , photos\r\n    } as const),\r\n    addPostAC: (post: string) => ({type: 'PROFILE/ADD_POST', post} as const),\r\n    setUserProfile: (profile: NewProfileType) => ({type: 'PROFILE/SET_USER_PROFILE', profile} as const),\r\n    setUserStatus: (status: string) => ({\r\n        type: 'PROFILE/SET_USER_STATUS',\r\n        status\r\n    } as const),\r\n\r\n};\r\n\r\nexport type  InitialStateType = typeof initialState\r\nexport type ActionsType = InferActionsTypes<typeof profileActions>\r\ntype ThunkType = BaseThunkType<ActionsType | FormAction>\r\n\r\n\r\nexport default profileReducer;\r\n","import React, {ChangeEvent, useEffect, useState} from 'react';\r\nimport {useDispatch, useSelector} from 'react-redux';\r\nimport {getStatus} from '../../p2-bll/profile-selectors';\r\nimport {updateUserStatus} from '../../p2-bll/profile-reducer';\r\n\r\n\r\ntype PropsType = {\r\n    isOwner: boolean\r\n}\r\n\r\nconst ProfileStatus: React.FC<PropsType> = ({isOwner}) => {\r\n    const dispatch = useDispatch()\r\n    const status = useSelector(getStatus)\r\n    const [editMode, setEditMode] = useState(false);\r\n    const [localStatus, setStatus] = useState(status);\r\n\r\n    useEffect(() => {\r\n        setStatus(status);\r\n    }, [status]);\r\n\r\n\r\n    const activateEditMode = () => {\r\n        setEditMode(true);\r\n    };\r\n\r\n    const deactivateEditMode = () => {\r\n        setEditMode(false);\r\n        dispatch(updateUserStatus(localStatus));\r\n    };\r\n    const onStatusChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n        setStatus(e.currentTarget.value);\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            {/*Cant change other status*/}\r\n            {!isOwner &&\r\n            <div><b>Status</b> <span>{status || 'What are you doing?'}</span></div>\r\n            }\r\n            {/*---*/}\r\n            {isOwner && !editMode && <div>\r\n                <b>Status</b> <span onDoubleClick={activateEditMode}>{status || 'What are you doing?'}</span>\r\n            </div>}\r\n            {editMode && <div><input autoFocus={true} onChange={onStatusChange} onBlur={deactivateEditMode}\r\n                                     value={localStatus}/></div>}\r\n\r\n        </div>\r\n    )\r\n        ;\r\n\r\n};\r\n\r\nexport default ProfileStatus;\r\n","import React from 'react';\r\nimport st from './ProfileData.module.css';\r\nimport {ContactsType, NewProfileType} from '../../../../Types/Types';\r\n\r\nconst Contact: React.FC<ContactsPropsType> = ({contactTitle, contactValue}) => {\r\n    return (<div>\r\n        <b>{contactTitle}</b> : {contactValue}\r\n    </div>);\r\n};\r\nconst ProfileData: React.FC<ProfileDataType> = ({profile, isOwner, editMode}) => {\r\n\r\n\r\n    return <div className={st.description}>\r\n        {isOwner && <div>\r\n            <button onClick={editMode}>edit</button>\r\n        </div>}\r\n        <div>\r\n            <b>Looking for a job</b> : {profile.lookingForAJob ? 'Yes' : 'No'}\r\n        </div>\r\n        {profile.lookingForAJob &&\r\n        <div>\r\n            <b>My professional skills</b> : {profile.lookingForAJob}\r\n        </div> && <div>\r\n            <b>I'm looking for</b> : {profile.lookingForAJobDescription}\r\n        </div>\r\n        }\r\n        <div>\r\n            <b>Full Name</b> : {profile.fullName}\r\n        </div>\r\n        <div>\r\n            <b>About me</b> : {profile.aboutMe}\r\n        </div>\r\n        <div>\r\n            <b>Contacts</b> : {Object.keys(profile.contacts).map(key => {\r\n            return <Contact key={key} contactTitle={key}\r\n                            contactValue={profile.contacts[key as keyof ContactsType]}/>;\r\n        })}\r\n        </div>\r\n    </div>;\r\n};\r\nexport default ProfileData;\r\n\r\ntype ProfileDataType = {\r\n    profile: NewProfileType\r\n    isOwner: boolean\r\n    editMode: () => void\r\n}\r\ntype ContactsPropsType = {\r\n    contactTitle: string\r\n    contactValue: string\r\n}\r\n","import React from 'react';\r\nimport {NewProfileType} from '../../../../Types/Types';\r\nimport st from '../ProfileData/ProfileData.module.css';\r\nimport {InjectedFormProps, reduxForm} from 'redux-form';\r\nimport {createField, MyInput, Textarea} from '../../../../SN-3-common/FormControls/FormControls';\r\n\r\ntype PropsType = {\r\n    profile: NewProfileType\r\n\r\n}\r\nconst ProfileDataForm: React.FC<InjectedFormProps<NewProfileType, PropsType> & PropsType> = ({\r\n                                                                                                 profile,\r\n                                                                                                 handleSubmit,\r\n                                                                                                 error\r\n\r\n                                                                                             }) => {\r\n    return <form onSubmit={handleSubmit}>\r\n        <div className={st.description}>\r\n            <div>\r\n                <button>Save</button>\r\n                {error && <div>{error}</div>}\r\n            </div>\r\n            <div>\r\n                <b>Full Name</b>: {createField('Full name', 'fullName', [], MyInput)}\r\n            </div>\r\n            <div>\r\n                <b>Looking for a job</b> :{createField('', 'lookingForAJob', [], MyInput, {type: 'checkbox'})}\r\n            </div>\r\n\r\n            <div>\r\n                <b>My professional\r\n                    skills</b> : {createField('My professional skills', 'lookingForAJobDescription', [], Textarea)}\r\n            </div>\r\n            <div>\r\n                <b>About me</b> :{createField('About me', 'aboutMe', [], Textarea)}\r\n            </div>\r\n            <div>\r\n                <b>Contacts</b> : {Object.keys(profile.contacts).map(key => {\r\n                return <div key={key}>\r\n                    <b>{key}:</b> {createField(key, 'contacts.' + key, [], MyInput)}\r\n\r\n                </div>;\r\n            })}\r\n            </div>\r\n        </div>\r\n    </form>;\r\n};\r\n\r\nconst ProfileDataFormRedux = reduxForm<NewProfileType, PropsType>({form: 'edit-profile'})(ProfileDataForm);\r\n\r\nexport default ProfileDataFormRedux;\r\n","import React, {ChangeEvent, useState} from 'react';\r\nimport {NewProfileType} from '../../../Types/Types';\r\nimport ProfileStatus from './ProfileStatus/ProfileStatus';\r\nimport commonLogo from '../../../photo/commonAvatar.png';\r\nimport st from './ProfileData/ProfileData.module.css';\r\nimport ProfileData from './ProfileData/ProfileData';\r\nimport ProfileDataForm from './ProfileDataForm/ProfileDataForm';\r\nimport PreLoader from '../../../SN-3-common/preLoader/preLoader';\r\n\r\ntype PropsType = {\r\n    status: string\r\n    updateStatus: (status: string) => void\r\n    isOwner: boolean\r\n    savePhoto: (file: File) => void\r\n    profile: NewProfileType | null\r\n    saveProfile: (profile: NewProfileType) => Promise<any>\r\n}\r\n\r\n// type ProfileTypeKeys = GetStringKeys<PropsType>,\r\n\r\n\r\nconst ProfileInfo: React.FC<PropsType> = React.memo(({\r\n                                                         isOwner,\r\n                                                         profile,\r\n                                                         savePhoto,\r\n                                                         status,\r\n                                                         updateStatus,\r\n                                                         saveProfile\r\n                                                     }) => {\r\n    const [editMode, setEditMode] = useState(false);\r\n    const goToEditMode = () => {\r\n        setEditMode(true);\r\n    };\r\n    if (!profile) {\r\n        return <div><PreLoader/></div>;\r\n    }\r\n    const onMainPhotoSelected = (e: ChangeEvent<HTMLInputElement>) => {\r\n        if (e.target.files && e.target.files.length) {\r\n            savePhoto(e.target.files[0]);\r\n        }\r\n    };\r\n    const onSubmit = (profile: NewProfileType) => {\r\n        //todo:remove then\r\n        saveProfile(profile).then(() => {\r\n            setEditMode(false);\r\n        });\r\n    };\r\n\r\n\r\n    return <div>\r\n        <div>\r\n            {isOwner && <input type={'file'} onChange={onMainPhotoSelected}/>}\r\n        </div>\r\n        <img src={profile.photos.large || commonLogo} alt={'ava'} className={st.thisAva}/>\r\n\r\n        <ProfileStatus isOwner={isOwner}/>\r\n        {editMode ? <ProfileDataForm initialValues={profile} profile={profile} onSubmit={onSubmit}/> :\r\n            <ProfileData profile={profile} isOwner={isOwner} editMode={goToEditMode}/>}\r\n\r\n        {/*<ProfileStatusClass status={props.status} updateStatus={props.updateStatus}/>*/}\r\n    </div>;\r\n\r\n});\r\n\r\n\r\nexport default ProfileInfo;\r\n\r\n\r\n\r\n\r\n\r\n","import React from 'react';\r\nimport st from './Post.module.css';\r\n\r\n\r\ntype PostType = {\r\n    id: string\r\n    message: string\r\n    likesCount: number\r\n\r\n}\r\n\r\n\r\nconst Post: React.FC<PostType> = ({id, message, likesCount}) => {\r\n    return (\r\n        <div className={`${st.wrapper} ${st.wrapper_i}`}>\r\n\r\n            <div className={`${st.item} ${st.img}`}>\r\n                <img src={'https://www.sunhome.ru/i/wallpapers/91/neitiri-v-avatar.orig.jpg'} alt={'avatar'}/>\r\n            </div>\r\n\r\n            <div key={id} className={`${st.items} ${st.messageBox}`}>\r\n                {message}\r\n            </div>\r\n            <div className={`${st.items} ${st.buttonsBlock}`}>\r\n\r\n                <div className={st.body}>\r\n                    <div className={st.button}>\r\n                        <span className={`${st.button_line} ${st.button_line_top}`}></span>\r\n                        <span className={`${st.button_line} ${st.button_line_right}`}></span>\r\n                        <span className={`${st.button_line} ${st.button_line_bottom}`}></span>\r\n                        <span className={`${st.button_line} ${st.button_line_left}`}></span>\r\n                        Like\r\n                    </div>\r\n                </div>\r\n\r\n\r\n            </div>\r\n            <div className={`${st.items} ${st.likes}`}>{likesCount}</div>\r\n\r\n        </div>\r\n\r\n\r\n    );\r\n\r\n};\r\n\r\n\r\nexport default Post;\r\n","import React, {useCallback} from 'react';\r\nimport st from './MyPosts.module.css';\r\nimport Post from './Post/Post';\r\nimport {InjectedFormProps, reduxForm} from 'redux-form';\r\nimport {maxLengthCreator, required} from '../../../utils/validators/validators';\r\nimport {useDispatch, useSelector} from 'react-redux';\r\nimport {getPostData} from '../p2-bll/profile-selectors';\r\nimport {profileActions} from '../p2-bll/profile-reducer';\r\nimport {createField, GetStringKeys, MyInput} from '../../../SN-3-common/FormControls/FormControls';\r\n\r\ntype PropsPType = {}\r\n\r\nexport const MyPosts: React.FC<PropsPType> = React.memo(() => {\r\n\r\n    const dispatch = useDispatch()\r\n    const postData = useSelector(getPostData)\r\n\r\n\r\n    const postsData = [...postData]\r\n        .reverse()\r\n        .map(post => <Post key={post.id} message={post.message} id={post.id} likesCount={post.likesCount}/>);\r\n\r\n    const onAddPost = useCallback((values: any) => {\r\n        dispatch(profileActions.addPostAC(values.newPostText))\r\n    }, [dispatch]);\r\n\r\n\r\n    return (\r\n        <div className={st.item}> Posts\r\n            <AddNewPostFormRedux onSubmit={onAddPost}/>\r\n            {postsData}\r\n        </div>\r\n    );\r\n});\r\n\r\nconst maxLength = maxLengthCreator(30);\r\ntype AddPostFormValuesType = {\r\n    newPostText: string\r\n}\r\ntype PropsType = {}\r\n\r\nconst AddPostForm: React.FC<InjectedFormProps<AddPostFormValuesType, PropsType> & PropsType> = ({\r\n\r\n                                                                                                    handleSubmit,\r\n                                                                                                    ...props\r\n                                                                                                }) => {\r\n    return (\r\n        <form onSubmit={handleSubmit}>\r\n            {createField<GetStringKeys<AddPostFormValuesType>>('Your post', 'newPostText', [required, maxLength], MyInput)}\r\n            <div onClick={handleSubmit} className={st.body}>\r\n                <div className={st.button}>\r\n                    <span className={`${st.button_line} ${st.button_line_top}`}></span>\r\n                    <span className={`${st.button_line} ${st.button_line_right}`}></span>\r\n                    <span className={`${st.button_line} ${st.button_line_bottom}`}></span>\r\n                    <span className={`${st.button_line} ${st.button_line_left}`}></span>\r\n                    Add Me\r\n                </div>\r\n            </div>\r\n        </form>\r\n    );\r\n};\r\n\r\nconst AddNewPostFormRedux = reduxForm<AddPostFormValuesType, PropsType>({form: 'ProfileAddNewPostForm'})(AddPostForm);\r\n\r\nexport default MyPosts;\r\n","import React from 'react';\r\nimport ProfileInfo from '../ProfileInfo/ProfileInfo';\r\nimport MyPosts from '../MyPosts/MyPosts';\r\nimport {NewProfileType} from '../../../Types/Types';\r\n\r\n\r\nexport const Profile: React.FC<PropsType> = React.memo(({\r\n                                                            savePhoto,\r\n                                                            isOwner,\r\n                                                            profile,\r\n                                                            status,\r\n                                                            updateStatus,\r\n                                                            saveProfile\r\n                                                        }) => {\r\n\r\n    return (\r\n        <div>\r\n            <ProfileInfo savePhoto={savePhoto} isOwner={isOwner} profile={profile}\r\n                         status={status} updateStatus={updateStatus}\r\n                         saveProfile={saveProfile}\r\n\r\n            />\r\n            <MyPosts/>\r\n        </div>\r\n    );\r\n\r\n});\r\ntype PropsType = {\r\n    profile: NewProfileType | null\r\n    status: string\r\n    updateStatus: (status: string) => void\r\n    isOwner: boolean\r\n    savePhoto: (file: File) => void\r\n    saveProfile: (formData: any) => any\r\n\r\n}\r\n\r\n","import React from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {RouteComponentProps, withRouter} from 'react-router-dom';\r\nimport {compose} from 'redux';\r\nimport {Profile} from './ProfileContent';\r\nimport {NewProfileType} from '../../../Types/Types';\r\nimport {AppRootStateType} from '../../../SN-1-main/m2-bll/redux-store';\r\nimport {getUserProfile, getUserStatus, savePhoto, saveProfile, updateUserStatus} from '../p2-bll/profile-reducer';\r\nimport {withAuthRedirect} from '../../../HOC/WithAuthRedirect';\r\n\r\n\r\ntype MapPropsType = ReturnType<typeof mapStateToProps>\r\ntype DispatchPropsType = {\r\n    getUserProfile: (userId: number | null) => void\r\n    getUserStatus: (userId: number | null) => void\r\n    updateUserStatus: (status: string) => void\r\n    savePhoto: (file: File) => void\r\n    saveProfile: (profile: NewProfileType) => Promise<any>\r\n}\r\n\r\ntype PathParamsType = {\r\n    userId: string\r\n\r\n}\r\n\r\n\r\ntype PropsType = MapPropsType & DispatchPropsType & RouteComponentProps<PathParamsType>;\r\n//\r\n// type HooksType = {}\r\n// const ProfileHooks: React.FC<HooksType> = (props) => {\r\n//     const {id} = useParams<{ id: string }>()\r\n//     const dispatch = useDispatch();\r\n//     const profile = useSelector(getProfile)\r\n//     const status = useSelector(getStatus)\r\n//     const isAuth = useSelector(getIsAuth)\r\n//     const authorizedUserId = useSelector(getUserId)\r\n//\r\n//     const getUserProfile = useCallback((userId: number | null) => {\r\n//         dispatch(getUserProfile(userId))\r\n//     }, [dispatch])\r\n//     const getUserStatus = useCallback((userId: number | null) => {\r\n//         dispatch(getUserStatus(userId))\r\n//     }, [dispatch])\r\n//     const updateUserStatus = useCallback((status: string) => {\r\n//         dispatch(updateUserStatus(status))\r\n//     }, [dispatch])\r\n//     const savePhoto = useCallback((photo: File) => {\r\n//         dispatch(savePhoto(photo))\r\n//     }, [])\r\n//     const saveProfile = useCallback(async (profile: NewProfileType): Promise<any> => {\r\n//         await dispatch(saveProfile(profile))\r\n//     }, [])\r\n//\r\n//\r\n//     useEffect(() => {\r\n//     }, [])\r\n//\r\n//\r\n//     return (\r\n//         <div>\r\n//\r\n//\r\n//         </div>);\r\n//\r\n// }\r\n\r\n\r\nclass ProfileContentContainerAPI extends React.Component<PropsType> {\r\n    constructor(props: PropsType) {\r\n        super(props);\r\n    }\r\n\r\n    refreshProfile() {\r\n        let userId: number | null = +this.props.match.params.userId;\r\n        if (!userId) {\r\n            userId = this.props.authorizedUserId;\r\n            if (!userId) {\r\n                this.props.history.push('/login');\r\n            }\r\n        }\r\n\r\n        if (!userId) {\r\n            console.error('ID should exists in URI params or in state (\\'authorizedUserId\\')');\r\n        } else {\r\n            this.props.getUserProfile(userId);\r\n            this.props.getUserStatus(userId);\r\n        }\r\n    }\r\n\r\n\r\n    componentDidMount() {\r\n\r\n        this.refreshProfile();\r\n    }\r\n\r\n    componentDidUpdate(prevProps: PropsType, prevState: PropsType) {\r\n        if (this.props.match.params.userId != prevProps.match.params.userId) {\r\n            this.refreshProfile();\r\n        }\r\n\r\n    }\r\n\r\n    componentWillUnmount(): void {\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <Profile\r\n                    {...this.props}\r\n                    isOwner={!this.props.match.params.userId}\r\n                    profile={this.props.profile}\r\n                    status={this.props.status}\r\n                    updateStatus={this.props.updateUserStatus}\r\n                />\r\n\r\n            </div>);\r\n    }\r\n}\r\n\r\nlet mapStateToProps = (state: AppRootStateType) => ({\r\n    profile: state.profilePage.profile,\r\n    status: state.profilePage.status,\r\n    isAuth: state.auth.isAuth,\r\n    authorizedUserId: state.auth.userId,\r\n\r\n\r\n});\r\n\r\n\r\nexport default compose<React.ComponentType>(\r\n    connect(mapStateToProps, {\r\n        getUserProfile,\r\n        getUserStatus,\r\n        updateUserStatus,\r\n        savePhoto,\r\n        saveProfile\r\n    }),\r\n    withRouter,\r\n    withAuthRedirect\r\n)(ProfileContentContainerAPI);\r\n\r\n\r\n","import {AppRootStateType} from '../../../SN-1-main/m2-bll/redux-store';\r\n\r\n\r\nexport const getLogin = (state: AppRootStateType): string | null => {\r\n    return state.auth.login;\r\n};\r\nexport const getError = (state: AppRootStateType): string => {\r\n    return state.auth.error;\r\n};\r\n","import React from 'react';\r\n\r\nexport const LoginLabel = () => {\r\n    return (\r\n        <div>\r\n            <p>To log in or get registered\r\n                <a href={'https://social-network.samuraijs.com/'}\r\n                   target={'_blank'}> HERE\r\n                </a>\r\n            </p>\r\n            <p>or use common test account credentials:</p>\r\n            <p>Email: <b>free@samuraijs.com</b></p>\r\n            <p>Password: <b>free</b></p>\r\n        </div>)\r\n}","import React from 'react';\r\nimport {useDispatch, useSelector} from 'react-redux';\r\nimport {authActions, loginTC} from '../l2-bll/auth-reducer';\r\nimport {Button, Checkbox, Form, Input} from 'antd';\r\nimport st from './Login.module.css';\r\nimport {EyeInvisibleOutlined, EyeTwoTone, LockOutlined, UserOutlined} from '@ant-design/icons/lib/icons';\r\nimport {getIsAuth} from '../../f2-profile/p2-bll/profile-selectors';\r\nimport {getError} from '../l2-bll/auth-selectors';\r\nimport {LoginLabel} from './l2-old-features/LoginLabel';\r\n\r\nconst Login = () => {\r\n    const dispatch = useDispatch();\r\n    const error = useSelector(getError);\r\n    const isAuth = useSelector(getIsAuth);\r\n\r\n    // if (isAuth) {\r\n    //     return <Redirect to={PROFILE_PATH}/>;\r\n    // }\r\n    const onSubmit = async (values: {\r\n        email: string,\r\n        password: string\r\n    }) => {\r\n        await dispatch(loginTC(values));\r\n    };\r\n    const resetError = () => {\r\n        dispatch(authActions.setError(''))\r\n    }\r\n    return (<Form onFinish={onSubmit}\r\n                  className={st.loginForm}\r\n        >\r\n            <LoginLabel/>\r\n            <Form.Item\r\n                name=\"email\"\r\n                {...error && {\r\n                    help: error,\r\n                    validateStatus: 'error',\r\n                }}\r\n\r\n                rules={[\r\n                    {\r\n                        type: 'email',\r\n                        message: 'The input is not valid E-mail!',\r\n                    },\r\n                    {\r\n                        required: true,\r\n                        message: 'Please input your Email!',\r\n                    },\r\n                ]}\r\n            >\r\n                <Input prefix={<UserOutlined className=\"site-form-item-icon\"/>}\r\n                       type=\"email\"\r\n                       name=\"email\"\r\n                       placeholder=\"Email\"\r\n                       onClick={resetError}\r\n                />\r\n            </Form.Item>\r\n            <Form.Item\r\n                name=\"password\"\r\n                {...error && {\r\n                    help: error,\r\n                    validateStatus: 'error'\r\n                }}\r\n                rules={[\r\n                    {\r\n                        required: true,\r\n                        message: 'Please input your Password!',\r\n                    },\r\n\r\n                ]}\r\n            >\r\n                <Input.Password\r\n                    prefix={<LockOutlined className=\"site-form-item-icon\"/>}\r\n                    placeholder=\"Password\"\r\n                    iconRender={visible => (visible ? <EyeTwoTone/> : <EyeInvisibleOutlined/>)}\r\n                    onClick={resetError}\r\n                />\r\n            </Form.Item>\r\n            <Form.Item>\r\n                <Form.Item name=\"remember\" valuePropName=\"checked\" noStyle>\r\n                    <Checkbox>Remember me</Checkbox>\r\n                </Form.Item>\r\n                <a target={'_blank'} className={st.loginFormForgot} href=\"https://social-network.samuraijs.com/login\">\r\n                    Forgot password\r\n                </a>\r\n            </Form.Item>\r\n            <Form.Item>\r\n                <Button type=\"primary\" htmlType=\"submit\" className={st.loginFormButton}\r\n                >\r\n                    Log in\r\n                </Button>\r\n                Or <a target={'_blank'} href=\"https://social-network.samuraijs.com/signUp\">register now!</a>\r\n            </Form.Item>\r\n\r\n        </Form>\r\n    );\r\n};\r\n\r\n\r\nexport default Login;\r\n","import React from 'react';\r\nimport {Redirect, Route, Switch} from 'react-router-dom';\r\nimport {SuspendedChat, SuspendedDialogs} from '../../SN-1-main/m1-ui/App';\r\nimport Settings from '../../SN-2-features/f8-settings/n1-ui/Settings';\r\nimport Music from '../../SN-2-features/f6-music/m1-ui/Music';\r\nimport {Page404} from '../Page404/Page404';\r\nimport UsersPage from '../../SN-2-features/f4-users/u1-ui/UsersPage';\r\nimport ProfileContentContainerAPI from '../../SN-2-features/f2-profile/p1-ui/ProfileContentContainerAPI';\r\nimport Login from '../../SN-2-features/f1-login/l1-ui/Login';\r\n\r\n\r\nexport const SIGN_IN_PATH = '/login';\r\nexport const PROFILE_PATH = '/profile';\r\nexport const DIALOGS_PATH = '/dialogs';\r\nexport const USERS_PATH = '/users';\r\nexport const CHAT_PATH = '/chat';\r\nexport const NEWS_PATH = '/news';\r\nexport const MUSIC_PATH = '/music';\r\nexport const SETTINGS_PATH = '/settings';\r\nexport const PAGE_NOT_FOUND_PATH = '/404';\r\n\r\ntype PropsType = {}\r\nexport const Routes: React.FC<PropsType> = (props) => {\r\n\r\n    return <>\r\n        <Switch>\r\n            <Route path={SIGN_IN_PATH} render={() => <Login/>}/>\r\n            <Route exact path='/'\r\n                   render={() => <Redirect to={PROFILE_PATH}/>}/>\r\n            <Route path={DIALOGS_PATH} render={() => <SuspendedDialogs/>}/>\r\n            <Route path={PROFILE_PATH + '/:userId?'} render={() =>\r\n                <ProfileContentContainerAPI/>}/>\r\n            <Route path={USERS_PATH} render={() => <UsersPage/>}/>\r\n            <Route path={NEWS_PATH} render={() => <Login/>}/>\r\n            <Route path={PAGE_NOT_FOUND_PATH} render={() => <Page404/>}/>\r\n            <Route path={MUSIC_PATH} render={() => <Music/>}/>\r\n            <Route path={SETTINGS_PATH} render={() => <Settings/>}/>\r\n            <Route path={CHAT_PATH} render={() => <SuspendedChat/>}/>\r\n            <Redirect from={'*'} to={PAGE_NOT_FOUND_PATH}/>\r\n        </Switch>\r\n\r\n    </>;\r\n};\r\n\r\n","import React from 'react';\r\nimport {Link} from 'react-router-dom';\r\nimport {Menu} from 'antd';\r\nimport {\r\n    CommentOutlined,\r\n    CustomerServiceOutlined,\r\n    FileOutlined,\r\n    SettingOutlined,\r\n    SoundOutlined,\r\n    UserAddOutlined,\r\n    UserOutlined\r\n} from '@ant-design/icons';\r\nimport {CHAT_PATH, DIALOGS_PATH, NEWS_PATH, PROFILE_PATH, USERS_PATH} from '../routes/Routes';\r\n\r\nconst {SubMenu} = Menu;\r\ntype PropsType = {}\r\nexport const Nav: React.FC<PropsType> = () => {\r\n    return (\r\n        <Menu theme=\"dark\" mode=\"inline\">\r\n            <Menu.Item key=\"1\" icon={<UserOutlined/>}>\r\n                <Link to={PROFILE_PATH}>Profile</Link>\r\n            </Menu.Item>\r\n            <Menu.Item key=\"Main/Messages\" icon={<CommentOutlined/>}>\r\n                <Link to={DIALOGS_PATH}>Messages</Link>\r\n            </Menu.Item>\r\n            {/*<Menu.Item key=\"Main/Friends\" icon={<TeamOutlined/>}>*/}\r\n            {/*    <Link to={USERS_PATH}>Friends</Link>*/}\r\n            {/*</Menu.Item>*/}\r\n            <Menu.Item key=\"Main/Community\" icon={<UserAddOutlined/>}>\r\n                <Link to={USERS_PATH}> Community</Link>\r\n            </Menu.Item>\r\n            <Menu.Item key=\"Main/Chat\" icon={<UserAddOutlined/>}>\r\n                <Link to={CHAT_PATH}>Chat</Link>\r\n            </Menu.Item>\r\n            <SubMenu key=\"Music\" icon={<CustomerServiceOutlined/>} title=\"Music\">\r\n                <Menu.Item key=\"Music/New\">New music</Menu.Item>\r\n                <Menu.Item key=\"Music/My\">My music</Menu.Item>\r\n                <Menu.Item key=\"Music/All\">All music</Menu.Item>\r\n            </SubMenu>\r\n            <SubMenu key=\"News\" icon={<SoundOutlined/>} title=\"News\">\r\n                <Menu.Item key=\"News/Friends\">Friends</Menu.Item>\r\n                <Menu.Item key=\"News/World\">World</Menu.Item>\r\n                <Menu.Item key=\"News/City\">City</Menu.Item>\r\n            </SubMenu>\r\n            <SubMenu key=\"Settings\" icon={<SettingOutlined/>} title=\"Settings\">\r\n                <Menu.Item key=\"Settings/General\">General</Menu.Item>\r\n                <Menu.Item key=\"Settings/Security\">Security</Menu.Item>\r\n                <Menu.Item key=\"Settings/Privacy\">Privacy</Menu.Item>\r\n            </SubMenu>\r\n            <Menu.Item key=\"Login\" icon={<FileOutlined/>}>\r\n                <Link to={NEWS_PATH}>Login</Link>\r\n            </Menu.Item>\r\n        </Menu>\r\n    );\r\n\r\n};\r\n\r\n\r\n","import React from 'react';\r\nimport st from './Header.module.css';\r\nimport {Link} from 'react-router-dom';\r\nimport {useDispatch, useSelector} from 'react-redux';\r\n\r\nimport {Button} from 'antd';\r\nimport {getIsAuth} from '../../SN-2-features/f2-profile/p2-bll/profile-selectors';\r\nimport {logoutTC} from '../../SN-2-features/f1-login/l2-bll/auth-reducer';\r\nimport {getLogin} from '../../SN-2-features/f1-login/l2-bll/auth-selectors';\r\nimport {SIGN_IN_PATH} from '../routes/Routes';\r\n\r\ntype PropsType = {}\r\nexport const HeaderM: React.FC<PropsType> = (props) => {\r\n    const dispatch = useDispatch()\r\n    const isAuth = useSelector(getIsAuth)\r\n    const login = useSelector(getLogin)\r\n\r\n    const logout = () => {\r\n        dispatch(logoutTC())\r\n    }\r\n\r\n    return (\r\n        <div className={st.loginBlock}>\r\n            {isAuth\r\n                ? <>{login} - <Button type=\"primary\"   onClick={logout}>Log out</Button></>\r\n                : <Link to={SIGN_IN_PATH}>Login</Link>}\r\n        </div>\r\n    );\r\n\r\n}\r\n\r\n","import {applyMiddleware, combineReducers, createStore, Store} from 'redux';\r\n\r\nimport thunkMiddleware from 'redux-thunk';\r\nimport appReducer from './app-reducer';\r\nimport {composeWithDevTools} from 'redux-devtools-extension';\r\nimport {reducer as formReducer} from 'redux-form'\r\nimport profileReducer from '../../SN-2-features/f2-profile/p2-bll/profile-reducer';\r\nimport dialogsReducer from '../../SN-2-features/f3-dialogs/d2-bll/dialogs-reducer';\r\nimport usersReducer from '../../SN-2-features/f4-users/u2-bll/users-reducer';\r\nimport authReducer from '../../SN-2-features/f1-login/l2-bll/auth-reducer';\r\nimport chatReducer from '../../SN-2-features/f5-chat/c2-bll/chat-reducer';\r\n\r\nconst reducers = combineReducers({\r\n    profilePage: profileReducer,\r\n    dialogsPage: dialogsReducer,\r\n    usersPage: usersReducer,\r\n    auth: authReducer,\r\n    app:appReducer,\r\n    form: formReducer,\r\n    chat:chatReducer\r\n});\r\n// We have to combine reducers, it's like our SN-1-main state\r\n\r\n\r\nlet store: Store = createStore(reducers, composeWithDevTools(applyMiddleware(thunkMiddleware)));\r\nexport type AppRootStateType = ReturnType<typeof reducers>\r\n// @ts-ignore\r\nwindow.store = store;\r\n\r\nexport default store;\r\n","import React, {useEffect, useState} from 'react';\r\nimport './App.css';\r\nimport {BrowserRouter} from 'react-router-dom';\r\nimport {Provider, useDispatch, useSelector} from 'react-redux';\r\nimport logoNew from '../../photo/samurai-robot-head-esport-mascot-logo_160921-34-removebg-preview.png'\r\nimport 'antd/dist/antd.css';\r\n\r\nimport {Layout} from 'antd';\r\nimport {withSuspense} from '../../HOC/withSuspense';\r\nimport {getIsInitialized} from '../m2-bll/app-selectors';\r\nimport {setInitializedTC} from '../m2-bll/app-reducer';\r\nimport PreLoader from '../../SN-3-common/preLoader/preLoader';\r\nimport {Nav} from '../../SN-3-common/Nav/Nav';\r\nimport {HeaderM} from '../../SN-3-common/Header/Header';\r\nimport {Routes} from '../../SN-3-common/routes/Routes';\r\nimport store from '../m2-bll/redux-store';\r\n\r\n\r\ntype PropsType = {}\r\n\r\nconst {Header, Content, Footer, Sider} = Layout;\r\n\r\n\r\nconst DialogContainer = React.lazy(() => import('../../SN-2-features/f3-dialogs/d1-ui/Dialogs'));\r\nconst ChatContainer = React.lazy(() => import('../../SN-2-features/f5-chat/c1-ui/ChatPage'));\r\n// type MapPropsType = ReturnType<typeof mapStateToProps>\r\n// type DispatchPropsType = {\r\n//     setInitializedTC: () => void\r\n// }\r\nexport const SuspendedDialogs = withSuspense(DialogContainer);\r\nexport const SuspendedChat = withSuspense(ChatContainer);\r\nexport const AppHooks: React.FC<PropsType> = () => {\r\n    const dispatch = useDispatch()\r\n    const [collapsed, setCollapsed] = useState<boolean>(false)\r\n    const isInitialized = useSelector(getIsInitialized)\r\n\r\n    useEffect(() => {\r\n        dispatch(setInitializedTC());\r\n    }, [dispatch])\r\n\r\n    const onCollapse = () => {\r\n        setCollapsed(!collapsed);\r\n    };\r\n\r\n    if (!isInitialized) {\r\n        return <PreLoader/>;\r\n    }\r\n    return (<div>\r\n            <Layout style={{minHeight: '100vh'}}>\r\n                <Sider collapsible collapsed={collapsed} onCollapse={onCollapse}>\r\n                    <div className=\"logo\"><img src={logoNew} alt=\"newLogo\"/></div>\r\n                    <Nav/>\r\n                </Sider>\r\n                <Layout className=\"site-layout\">\r\n                    <Header className=\"site-layout-background\">\r\n                        <HeaderM/>\r\n                    </Header>\r\n                    <Content style={{margin: '0 16px'}}>\r\n                        <Routes/>\r\n                    </Content>\r\n                    <Footer style={{textAlign: 'center'}}>Samurai Social Network ©2020 Created by Alex Dubrovskii &\r\n                        IT-KAMASUTRA</Footer>\r\n                </Layout>\r\n            </Layout>\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\n//\r\n// class App extends React.Component<MapPropsType & DispatchPropsType> {\r\n//     state = {\r\n//         collapsed: false,\r\n//     };\r\n//\r\n//     catchAllUnhandledError = (e: PromiseRejectionEvent) => {\r\n//         alert('Some Error');\r\n//\r\n//     };\r\n//\r\n//     onCollapse = (collapsed: boolean) => {\r\n//         console.log(collapsed);\r\n//         this.setState({collapsed});\r\n//     };\r\n//\r\n//     componentDidMount() {\r\n//         this.props.setInitializedTC();\r\n//         if (this.props.isAuth) return <Redirect to={SIGN_IN_PATH}/>;\r\n//         window.addEventListener('unhandledrejection', this.catchAllUnhandledError);\r\n//     }\r\n//\r\n//     componentWillUnmount() {\r\n//         window.removeEventListener('unhandledrejection', this.catchAllUnhandledError);\r\n//     }\r\n//\r\n//     render() {\r\n//         if (!this.props.isInitialized) {\r\n//             return <PreLoader/>;\r\n//         }\r\n//         const {collapsed} = this.state;\r\n//         return (\r\n//             <Layout style={{minHeight: '100vh'}}>\r\n//                 <Sider collapsible collapsed={collapsed} onCollapse={this.onCollapse}>\r\n//                     <div className=\"logo\"><img src={logoNew} alt=\"newLogo\"/></div>\r\n//                     <Nav/>\r\n//                 </Sider>\r\n//                 <Layout className=\"site-layout\">\r\n//                     <Header className=\"site-layout-background\">\r\n//                         <HeaderM/>\r\n//                     </Header>\r\n//                     <Content style={{margin: '0 16px'}}>\r\n//                         <Routes/>\r\n//                     </Content>\r\n//                     <Footer style={{textAlign: 'center'}}>Samurai Social Network ©2020 Created by Alex Dubrovskii &\r\n//                         IT-KAMASUTRA</Footer>\r\n//                 </Layout>\r\n//             </Layout>\r\n//\r\n//\r\n//         );\r\n//     }\r\n// }\r\n//\r\n// type mapStateToPropsType = {\r\n//     isInitialized: boolean\r\n//     isAuth: boolean\r\n//     login: string | null\r\n// }\r\n// const mapStateToProps = (state: AppRootStateType): mapStateToPropsType => ({\r\n//     isInitialized: state.app.isInitialized,\r\n//     isAuth: state.auth.isAuth,\r\n//     login: state.auth.login\r\n// });\r\n//\r\n// const AppContainer = compose<React.ComponentType>(\r\n//     withRouter,\r\n//     connect(mapStateToProps, {setInitializedTC}))(App);\r\n\r\nconst SamuraiJSApp: React.FC = () => {\r\n    return <BrowserRouter basename={process.env.PUBLIC_URL}>\r\n        <Provider store={store}>\r\n            <AppHooks/>\r\n        </Provider>\r\n    </BrowserRouter>;\r\n\r\n};\r\nexport default SamuraiJSApp;\r\n","import React from 'react';\r\n\r\nimport ReactDOM from 'react-dom';\r\nimport SamuraiJSApp from './SN-1-main/m1-ui/App';\r\n\r\nReactDOM.render(\r\n    <SamuraiJSApp/>,\r\n    document.getElementById('root')\r\n);\r\n\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\n\r\n","import {v1} from 'uuid';\r\nimport {InferActionsTypes} from '../../../Types/Types';\r\n\r\n\r\nlet initialState = {\r\n    messageData: [\r\n        {id: v1(), message: 'Hello'},\r\n        {id: v1(), message: 'My name'},\r\n        {id: v1(), message: 'My name is'},\r\n        {id: v1(), message: 'My name is Sasha'}\r\n    ] as Array<messageDataType>,\r\n    dialogsData: [\r\n        {id: v1(), name: 'Artem'},\r\n        {id: v1(), name: 'Vova'},\r\n        {id: v1(), name: 'Dima'},\r\n        {id: v1(), name: 'Masha'},\r\n        {id: v1(), name: 'Egor'}\r\n    ] as Array<dialogsDataType>\r\n};\r\n\r\nexport const dialogsReducer = (state: InitialStateDialogsType = initialState, action: ActionsType): InitialStateDialogsType => {\r\n    switch (action.type) {\r\n        case 'DIALOGS/SEND-NEW-MESSAGE-TEXT':\r\n            return {\r\n                ...state,\r\n                messageData: [...state.messageData, {id: v1(), message: action.newMessageBody}],\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\nexport const dialogsActions = {\r\n    sendMessage: (newMessageBody: string) => ({type: 'DIALOGS/SEND-NEW-MESSAGE-TEXT', newMessageBody} as const),\r\n};\r\n\r\n\r\nexport type  InitialStateDialogsType = typeof initialState\r\nexport type ActionsType = InferActionsTypes<typeof dialogsActions>\r\ntype messageDataType = {\r\n    id: string\r\n    message: string\r\n}\r\ntype dialogsDataType = {\r\n    id: string\r\n    name: string\r\n}\r\n\r\nexport default dialogsReducer;\r\n","const subscribers = {\r\n    'messages-received': [] as MessagesReceivedSubscriberType[],\r\n    'status-changed': [] as StatusChangedSubscriberType[]\r\n}\r\n\r\nlet ws: WebSocket | null = null\r\ntype EventsNamesType = 'messages-received' | 'status-changed'\r\n\r\nconst closeHandler = () => {\r\n    notifySubscribersAboutStatus('pending')\r\n    setTimeout(createChannel, 3000)\r\n}\r\nconst messageHandler = (e: MessageEvent) => {\r\n    const newMessages = JSON.parse(e.data)\r\n    subscribers['messages-received'].forEach(s => s(newMessages))\r\n}\r\nconst openHandler = () => {\r\n    notifySubscribersAboutStatus('ready')\r\n}\r\nconst errorHandler = () => {\r\n    notifySubscribersAboutStatus('error')\r\n    console.error('REFRESH PAGE')\r\n}\r\nconst cleanUp = () => {\r\n    ws?.removeEventListener('close', closeHandler)\r\n    ws?.removeEventListener('message', messageHandler)\r\n    ws?.removeEventListener('open', openHandler)\r\n    ws?.removeEventListener('error', errorHandler)\r\n}\r\nconst notifySubscribersAboutStatus = (status: StatusType) => {\r\n    subscribers['status-changed'].forEach(s => s(status))\r\n}\r\n\r\nfunction createChannel() {\r\n    cleanUp()\r\n    ws?.close()\r\n    ws = new WebSocket('wss://social-network.samuraijs.com/handlers/ChatHandler.ashx')\r\n    notifySubscribersAboutStatus('pending')\r\n    ws.addEventListener('close', closeHandler)\r\n    ws.addEventListener('message', messageHandler)\r\n    ws.addEventListener('open', openHandler)\r\n    ws.addEventListener('error', errorHandler)\r\n}\r\n\r\n\r\nexport const chatAPI = {\r\n    start() {\r\n        createChannel()\r\n    },\r\n    stop() {\r\n        subscribers['messages-received'] = []\r\n        subscribers['status-changed'] = []\r\n        cleanUp()\r\n        ws?.close()\r\n    },\r\n    subscribe(eventName: EventsNamesType, callback: MessagesReceivedSubscriberType | StatusChangedSubscriberType) {\r\n        // @ts-ignore\r\n        subscribers[eventName].push(callback)\r\n        return () => {\r\n            // @ts-ignore\r\n            subscribers[eventName] = subscribers[eventName].filter(s => s !== callback)\r\n        }\r\n    },\r\n    unsubscribe(eventName: EventsNamesType, callback: MessagesReceivedSubscriberType | StatusChangedSubscriberType) {\r\n        // @ts-ignore\r\n        subscribers[eventName] = subscribers[eventName].filter(s => s !== callback)\r\n    },\r\n    sendMessage(message: string) {\r\n        ws?.send(message)\r\n    }\r\n}\r\n\r\ntype MessagesReceivedSubscriberType = (messages: ChatMessageAPIType[]) => void\r\ntype StatusChangedSubscriberType = (status: StatusType) => void\r\n\r\nexport type ChatMessageAPIType = {\r\n    message: string\r\n    photo: string\r\n    userId: number\r\n    userName: string\r\n}\r\nexport type StatusType = 'pending' | 'ready' | 'error'\r\n","import {Dispatch} from 'redux';\r\n\r\nimport {FormAction} from 'redux-form';\r\nimport {v1} from 'uuid';\r\nimport {chatAPI, ChatMessageAPIType, StatusType} from '../c3-dal/chat-api';\r\nimport {BaseThunkType, InferActionsTypes} from '../../../Types/Types';\r\n\r\nexport type ChatMessageType = ChatMessageAPIType & { id: string }\r\n\r\nlet initialState = {\r\n    messages: [] as ChatMessageType[],\r\n    status: 'pending' as StatusType\r\n};\r\n\r\nconst chatReducer = (state = initialState, action: ActionsType): InitialStateType => {\r\n    switch (action.type) {\r\n        case 'chat/MESSAGES_RECEVIED':\r\n            return {\r\n                ...state,\r\n                messages: [...state.messages, ...action.payload.messages.map(m => ({...m, id: v1()}))]\r\n                    .filter((m, index, array) => index >= array.length - 100)\r\n            };\r\n        case 'chat/STATUS_CHANGED':\r\n            return {\r\n                ...state,\r\n                status: action.payload.status\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport const actions = {\r\n    messagesReceived: (messages: ChatMessageAPIType[]) => ({\r\n        type: 'chat/MESSAGES_RECEVIED', payload: {messages}\r\n    } as const),\r\n    statusChanged: (status: StatusType) => ({\r\n        type: 'chat/STATUS_CHANGED', payload: {status}\r\n    } as const)\r\n};\r\n\r\nlet _newMessageHandler: ((messages: ChatMessageAPIType[]) => void) | null = null;\r\nconst newMessageHandlerCreator = (dispatch: Dispatch) => {\r\n    if (_newMessageHandler === null) {\r\n        _newMessageHandler = (messages) => {\r\n            dispatch(actions.messagesReceived(messages));\r\n        };\r\n    }\r\n    return _newMessageHandler;\r\n};\r\n\r\nlet _statusChangedHandler: ((status: StatusType) => void) | null = null;\r\nconst statusChangedHandlerCreator = (dispatch: Dispatch) => {\r\n    if (_statusChangedHandler === null) {\r\n        _statusChangedHandler = (status) => {\r\n            dispatch(actions.statusChanged(status));\r\n        };\r\n    }\r\n    return _statusChangedHandler;\r\n};\r\n\r\nexport const startMessagesListening = (): ThunkType => async (dispatch) => {\r\n    chatAPI.start();\r\n    chatAPI.subscribe('messages-received', newMessageHandlerCreator(dispatch));\r\n    chatAPI.subscribe('status-changed', statusChangedHandlerCreator(dispatch));\r\n\r\n};\r\nexport const stopMessagesListening = (): ThunkType => async (dispatch) => {\r\n    chatAPI.unsubscribe('messages-received', newMessageHandlerCreator(dispatch));\r\n    chatAPI.unsubscribe('status-changed', statusChangedHandlerCreator(dispatch));\r\n    chatAPI.stop();\r\n};\r\n\r\nexport const sendMessage = (message: string): ThunkType => async (dispatch) => {\r\n    chatAPI.sendMessage(message);\r\n};\r\n\r\n\r\nexport default chatReducer;\r\n\r\nexport type InitialStateType = typeof initialState;\r\ntype ActionsType = InferActionsTypes<typeof actions>\r\ntype ThunkType = BaseThunkType<ActionsType | FormAction>\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pnf\":\"Page404_pnf__3FOeR\",\"pnf_error\":\"Page404_pnf_error__265Ij\",\"pnf_descr\":\"Page404_pnf_descr__79n_f\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"forms_wrapper\":\"UserSearchForm_forms_wrapper__3HQfN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loginBlock\":\"Header_loginBlock__HePMc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Post_wrapper__3z609\",\"items\":\"Post_items__1IV45\",\"messageBox\":\"Post_messageBox__DCgjW\",\"buttonsBlock\":\"Post_buttonsBlock__zsqWk\",\"likes\":\"Post_likes__1KPuC\",\"item\":\"Post_item__2aTQE\",\"body\":\"Post_body__2HIo-\",\"button\":\"Post_button__1yPaD\",\"button_line\":\"Post_button_line__aeNwL\",\"button_line_top\":\"Post_button_line_top__39Cxh\",\"button_line_bottom\":\"Post_button_line_bottom__1Wpex\",\"button_line_left\":\"Post_button_line_left__3naAK\",\"button_line_right\":\"Post_button_line_right__3WR0Z\"};","import React from 'react';\r\nimport st from './FormControls.module.css';\r\nimport {Field, WrappedFieldMetaProps, WrappedFieldProps} from 'redux-form';\r\nimport {FieldValidatorType} from '../../utils/validators/validators';\r\n\r\ntype FormControlParamsType = {\r\n    meta: WrappedFieldMetaProps\r\n\r\n}\r\n\r\n\r\nconst FormControl: React.FC<FormControlParamsType> = ({meta: {touched, error}, children}) => {\r\n    const hasError = touched && error;\r\n    // <div className={`${st.formControl} ${st.error}`}>\r\n    return <div className={st.formControl + ' ' + (hasError ? st.error : '')}>\r\n        <div>\r\n            {children}\r\n        </div>\r\n        {hasError && <span>{error}</span>}\r\n\r\n    </div>;\r\n};\r\n\r\nexport const Textarea: React.FC<WrappedFieldProps> = (props) => {\r\n    const {input, meta, children, ...restProps} = props;\r\n    return <FormControl {...props}>\r\n        <textarea {...input} {...restProps}/>\r\n    </FormControl>;\r\n};\r\n\r\n\r\nexport const MyInput: React.FC<WrappedFieldProps> = (props) => {\r\n    const {input, meta, children, ...restProps} = props;\r\n    return <FormControl {...props}>\r\n        <input {...input} {...restProps}/>\r\n    </FormControl>;\r\n};\r\n\r\n\r\nexport function createField<FormKeysType extends string>(placeholder: string | undefined,\r\n                                                         name: FormKeysType,\r\n                                                         validators: Array<FieldValidatorType>,\r\n                                                         component: React.FC<WrappedFieldProps>,\r\n                                                         props = {}, text = '') {\r\n    return <div>\r\n        <Field placeholder={placeholder} name={name} validate={validators} component={component} {...props}\r\n        /> {text}\r\n    </div>;\r\n}\r\n\r\nexport type GetStringKeys<T> = Extract<keyof T, string>\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"MyPosts_item__ta9Eo\",\"sc\":\"MyPosts_sc__2bwPq\",\"text\":\"MyPosts_text__18Msl\",\"body\":\"MyPosts_body__3o5Cu\",\"button\":\"MyPosts_button__16Bck\",\"button_line\":\"MyPosts_button_line__1_N6u\",\"button_line_top\":\"MyPosts_button_line_top__25_x8\",\"button_line_bottom\":\"MyPosts_button_line_bottom__37hT_\",\"button_line_left\":\"MyPosts_button_line_left__1J0nY\",\"button_line_right\":\"MyPosts_button_line_right__9eR4Q\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"preLoader_loader__1ZqdL\",\"l_main\":\"preLoader_l_main__3EjlI\",\"l_square\":\"preLoader_l_square__1IlWa\",\"animsquare1\":\"preLoader_animsquare1__XYXxK\",\"animsquare2\":\"preLoader_animsquare2__3Wan2\",\"animsquare3\":\"preLoader_animsquare3__LW6eE\",\"animsquare4\":\"preLoader_animsquare4__1pvJp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"description\":\"ProfileData_description__3rCA2\",\"thisPhoto\":\"ProfileData_thisPhoto__3yS4m\",\"thisLogo\":\"ProfileData_thisLogo__3HAbP\",\"thisAva\":\"ProfileData_thisAva__2DQSa\"};"],"sourceRoot":""}